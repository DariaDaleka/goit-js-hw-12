{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nexport default async function searchImagesByQuery(query, page) {\n  const URL = 'https://pixabay.com/api/';\n  const API_KEY = '45132179-4e43907cb4a483db7f713893c';\n\n  try {\n    const response = await axios.get(URL, {\n      params: {\n        key: API_KEY,\n        q: query,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: true,\n        page: page,\n        per_page: 15,\n      },\n    });\n    return response.data;\n  } catch (error) {\n    iziToast.error({\n      position: 'topRight',\n      message: `${error}`,\n    });\n  }\n}\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nexport function createImages(data) {\n  const lightbox = new SimpleLightbox('.gallery a', {\n    captions: true,\n    captionsData: 'alt',\n    captionDelay: 250,\n  });\n  const list = document.querySelector('.gallery');\n  let images = data.hits\n    .map(\n      hit =>\n        `<div class=\"image-size\"><a href=\"${hit.largeImageURL}\"><img class=\"image\" src=\"${hit.webformatURL}\" alt=\"${hit.tags}\" /></a><div class =\"text-wraper\"><div class=\"text-block\"><h5>likes</h5><p>${hit.likes}</p></div><div class=\"text-block\"><h5>views</h5><p>${hit.views}</p></div><div class=\"text-block\"><h5>comments</h5><p>${hit.comments}</p></div><div class=\"text-block\"><h5>downloads</h5><p>${hit.downloads}</p></div></div></div>`\n    )\n    .join('');\n  list.insertAdjacentHTML('beforeend', images);\n  lightbox.refresh();\n}\n\nexport function clearImages() {\n  const list = document.querySelector('.gallery');\n  list.innerHTML = '';\n}\n\nexport function scrollDown() {\n  const list = document.querySelector('.gallery');\n  const height = list.firstElementChild.getBoundingClientRect().height;\n  window.scrollBy({\n    top: height * 2,\n    behavior: 'smooth',\n  });\n}\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport searchImagesByQuery from './js/pixabay-api';\nimport { createImages, clearImages, scrollDown } from './js/render-functions';\n\nconst form = document.querySelector('.form-gallery');\nconst input = document.querySelector('.form-input');\nconst loader = document.querySelector('.loader');\nconst button = document.querySelector('.load');\nconst message = document.querySelector('.bottom');\n\nlet page = 1;\nlet wordFromStart = '';\n\nform.addEventListener('submit', handleSubmit);\nbutton.addEventListener('click', handleClick);\n\nfunction handleSubmit(event) {\n  clearImages();\n  event.preventDefault();\n  loader.classList.remove('hidden');\n  message.classList.remove('show-text');\n  let wordForSearch = input.value.trim();\n  wordFromStart = wordForSearch;\n  page = 1;\n  if (wordForSearch === '') {\n    iziToast.error({\n      position: 'topRight',\n      message: 'Please fill the input',\n    });\n    loader.classList.add('hidden');\n    return;\n  }\n  searchImagesByQuery(`${wordForSearch}`, page).then(async data => {\n    if (data.total === 0) {\n      iziToast.error({\n        position: 'topRight',\n        message:\n          'Sorry, there are no images matching your search query. Please try again!',\n      });\n      loader.classList.add('hidden');\n      return;\n    } else {\n      await createImages(data);\n      button.classList.remove('hidden');\n    }\n    if (data.hits.length < 15) {\n      button.classList.add('hidden');\n      message.classList.add('show-text');\n      iziToast.info({\n        position: 'topRight',\n        message: \"We're sorry, but you've reached the end of search results.\",\n      });\n    }\n    loader.classList.add('hidden');\n  });\n}\n\nfunction handleClick(event) {\n  page += 1;\n  loader.classList.remove('hidden');\n  button.classList.add('hidden');\n  searchImagesByQuery(`${wordFromStart}`, page)\n    .then(data => {\n      if (data.hits.length < 15) {\n        button.classList.add('hidden');\n        message.classList.add('show-text');\n        iziToast.info({\n          position: 'topRight',\n          message: \"We're sorry, but you've reached the end of search results.\",\n        });\n        loader.classList.add('hidden');\n        button.classList.add('hidden');\n      } else {\n        button.classList.remove('hidden');\n      }\n      createImages(data);\n      scrollDown();\n      loader.classList.add('hidden');\n    })\n    .catch(error => {\n      iziToast.error({\n        position: 'topRight',\n        message: error.message,\n      });\n      loader.classList.add('hidden');\n    });\n}\n"],"names":["searchImagesByQuery","query","page","URL","API_KEY","axios","error","createImages","data","lightbox","SimpleLightbox","list","images","hit","clearImages","scrollDown","height","form","input","loader","button","message","wordFromStart","handleSubmit","handleClick","event","wordForSearch","iziToast"],"mappings":"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"}